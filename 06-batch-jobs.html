<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="generator" content="pandoc">
    <title>Introduction to research computing on the Palmetto cluster</title>
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap-theme.css" />
    <link rel="stylesheet" type="text/css" href="css/swc.css" />
    <link rel="alternate" type="application/rss+xml" title="Software Carpentry Blog" href="http://software-carpentry.org/feed.xml"/>
    <meta charset="UTF-8" />
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body class="lesson">
    <div class="container card">
      <div class="banner">
        <a href="http://citi.clemson.edu" title="Software Carpentry">
          <img alt="Software Carpentry banner" src="img/paw.gif" width="100px" height="auto" />
        </a>
      </div>
      <article>
      <div class="row">
        <div class="col-md-10 col-md-offset-1">
                    <a href="index.html"><h1 class="title">Introduction to research computing on the Palmetto cluster</h1></a>
          <h2 class="subtitle">Submitting batch jobs</h2>
          <section class="objectives panel panel-warning">
<div class="panel-heading">
<h2 id="learning-objectives"><span class="glyphicon glyphicon-certificate"></span>Learning objectives</h2>
</div>
<div class="panel-body">
<ul>
<li>Understand the difference between an interactive job and a batch job</li>
<li>Understand the different components of a batch script</li>
<li>Submit a batch job using a submmission script</li>
<li>Learn about queues and priority</li>
<li>Learn how to monitor the progress of running jobs/ kill running jobs</li>
</ul>
</div>
</section>
<p>So far, we have been using the cluster “interactively”, i.e., by typing in commands into a shell running on the login node or the compute nodes. This approach is good when setting up software, running small experiments, and debugging/testing code - but isn’t the best use of our (or the cluster’s!) time. First, if the cluster is especially busy, it might take a long time for our interactive session to begin (the scheduler must wait for the resources to free up). Second, we must be logged into the interactive session for as long as our job takes. If we log out of the session, or if connectivity to the cluster is lost, the job is killed and any running programs are immediately stopped.</p>
<p>Instead, what we’d <em>like</em> to do is let the scheduler know where our code and data is, what resources we need to compute with them, and whenever these resources are available, to run our code and keep the results ready for us the next time we log in.</p>
<p>To do this, we must write a special script for the scheduler called a batch submission script (or simply, a batch script). A batch script is a shell script - so it consists mostly of shell commands. In addition, it has a few lines with instructions for the scheduler - all of these lines begin with <code>#PBS</code>.</p>
<p>Here’s a simple submit script, called <code>submit_sleep.sh</code>:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="co">#PBS -N sleep-example</span>
<span class="co">#PBS -l select=1:ncpus=1:mem=3gb,walltime=00:10:00</span>

<span class="kw">echo</span> Starting job
<span class="kw">sleep</span> 60
<span class="kw">echo</span> Job finished</code></pre></div>
        </div>
      </div>
      </article>
      <div class="footer">
        <a class="label clemson-orange" href="http://citi.clemson.edu">CITI</a>
        <a class="label clemson-orange" href="https://github.com/clemsoncoe/hpc-workshop">Source</a>
        <a class="label clemson-orange" href="mailto:atrikut@clemson.edu">Contact</a>
        <a class="label clemson-orange" href="LICENSE.html">License</a>
      </div>
    </div>
    <!-- Javascript placed at the end of the document so the pages load faster -->
    <script src="http://software-carpentry.org/v5/js/jquery-1.9.1.min.js"></script>
    <script src="css/bootstrap/bootstrap-js/bootstrap.js"></script>
  </body>
</html>
